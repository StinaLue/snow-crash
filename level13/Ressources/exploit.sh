rm /tmp/level13_nosuid 2>/dev/null
rm /tmp/fake_getuid.c 2>/dev/null
rm /tmp/fake_dynamic_lib.so 2>/dev/null

cp /home/user/level13/level13 /tmp/level13_nosuid

cat << 'EOF' > /tmp/fake_getuid.c
int getuid(void)
{
	return(4242);
}
EOF

cd /tmp/

gcc -fPIC -shared -o /tmp/fake_dynamic_lib.so /tmp/fake_getuid.c

export LD_PRELOAD="/tmp/fake_dynamic_lib.so"

/tmp/level13_nosuid
